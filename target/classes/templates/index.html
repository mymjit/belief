<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta name="renderer" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>主页</title>

    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" th:href="@{/bootstrap/css/bootstrap.css}"/>

    <!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
    <link rel="stylesheet" th:href="@{/bootstrap/css/bootstrap-theme.css}"/>

    <style type="text/css">
        /************ 实现大屏幕div下ul的上下居中 ************/
        .large_screen {
            position: relative;
        }

        .large_screen ul {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }
    </style>

</head>
<body>
<div class="container" style="width: 100% ; height: 100%;">
    <!-- 大屏幕的页头 -->
    <div th:include="/page/header :: (${session.user ne null} ? 'user' :'admin')"></div>


    <!--       对应标签页要显示的内容       -->
    <div class="tab-content">
        <!-- 主页显示的模块  -->
        <div role="tabpanel" class="tab-pane active" id="home">
           <div th:include="/page/middle_home :: ment1"></div>
        </div>
        <!--     书屋显示的模块     -->
        <div role="tabpanel" class="tab-pane" id="profile">
           <div th:include="/page/middle_house :: ment2"></div>
        </div>
        <!--     日记显示的模块     -->
        <div role="tabpanel" class="tab-pane" id="messages">
            <div th:include="/page/middle_diary :: ment3"></div>
        </div>
    </div>
</div>


<!-- 登入模态框  -->
<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel1">欢迎登入</h4>
            </div>
            <div class="modal-body">
                <form id="loginFrom">
                    <div class="form-group has-primary">
                        <label for="userName">用 户 名:</label>
                        <input class="form-control" type="text" maxlength="11" minlength="11" id="userName"
                               name="telephoneNumber" placeholder="请输入用户名"/></div>
                    <div class="form-group has-primary">
                        <label for="password">密&nbsp;&nbsp;&nbsp;&nbsp;码：</label>
                        <input class="form-control" type="password" id="password" name="password" placeholder="请输入密码"/>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="registerButton" type="button" class="btn btn-success" style="float: left;">
                    注册账号
                </button>
                <button id="login" type="button" class="btn btn-primary" style="float: right;">点我登入</button>
            </div>
        </div>
    </div>
</div>

<!--       注册模态框       -->
<div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">注册账号</h4>
            </div>
            <div class="modal-body">
                <form id="registerFrom">
                    <div class="form-group has-primary">
                        <label for="registerTelephoneNumber">手 机:</label>
                        <input type="text" class="form-control" id="registerTelephoneNumber" maxlength="11"
                               name="telephoneNumber" placeholder="请输入你的手机号码!"/>
                        <span id="helpBlock2" class="help-block hidden">请输入正确的手机号码！</span>
                    </div>
                    <div class="form-group has-primary">
                        <label for="registerPassWord">密&nbsp;&nbsp;&nbsp;&nbsp;码：</label>
                        <input type="password" class="form-control" id="registerPassWord" name="password"
                               placeholder="请输入密码"/>
                        <span id="helpBlock3" class="help-block hidden">密码必须大于8位,由数字/符号自由组合！</span>
                    </div>

                    <div class="form-group has-primary">
                        <label class="control-label" for="ConfirmPassWord">确认密码</label>
                        <input type="password" class="form-control" id="confirmPassWord" placeholder="请输入确认密码"/>
                        <span id="helpBlock1" class="help-block hidden">密码与确认密码不一直请重新输入！</span>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="register" type="button" class="btn btn-primary" data-toggle="tooltip" data-placement="left"
                        title="Tooltip on left">注册账号
                </button>
            </div>
        </div>
    </div>
</div>

<!--       对话框       -->
<div class="modal fade" id="messageModel" tabindex="-1" role="dialog" aria-labelledby="news">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">消息提示</h4>
            </div>
            <div class="modal-body">
                <div class="form-group has-primary">
                    <span id="message" class="text-success">注册成功</span>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Generated markup by the plugin -->
<div class="tooltip top" role="tooltip">
    <div class="tooltip-arrow"></div>
    <div class="tooltip-inner">
        前后密码输入不一致！
    </div>
</div>


<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script th:src="@{/jquery/jquery.min.js}"/>
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script th:src="@{/bootstrap/js/bootstrap.js}"/>
<script th:src="@{/bootstrap/js/respond.min.js}"/>
<script th:src="@{/bootstrap/js/html5shiv.min.js}"/>
<script th:src="@{/js/index.js}"/>


<script th:inline="javascript">

    //打开登入模态框
    $('#loginButton').click(function () {
        index.login_model();
    })

    //点击注册按钮
    $('#registerButton').click(function () {
        index.login_model();
        index.register_modal();
    })


    //登入事件
    $('#login').click(function () {
        var url = '/user/login';
        var data = $('#loginFrom').serializeArray();
        index.login_from(data, url);
    })


    //注册事件
    $('#register').click(function () {
        var url = '/user/register';
        var data = $('#registerFrom').serializeArray();
        index.register_from(data, url);
    })

    //关闭提示框后，修改页面用户信息
    $('#messageModel').on('hidden.bs.modal', function (e) {
        //刷新页面即可
        window.location.reload();
    })

    //手机输入完成后校验手机号码
    $('#registerTelephoneNumber').blur(function () {
        var regular = /^1\d{10}$/;
        var number = $('#registerTelephoneNumber').val();
        if (regular.test(number)) {
            $('#helpBlock2').parent().attr('class', 'form-group has-primary');
            $('#helpBlock2').attr('class', 'help-block hidden');
        } else {
            $('#helpBlock2').parent().attr('class', 'form-group has-error');
            $('#helpBlock2').attr('class', 'help-block show');
        }
    })

    //密码验证
    $('#registerPassWord').blur(function () {
        var regular = /^[a-zA-Z\d_]{8,}$/;
        var password = $('#registerPassWord').val()
        if (regular.test(password)) {
            $('#helpBlock3').parent().attr('class', 'form-group has-primary');
            $('#helpBlock3').attr('class', 'help-block hidden');
        } else {
            $('#helpBlock3').parent().attr('class', 'form-group has-error');
            $('#helpBlock3').attr('class', 'help-block show');
        }
    })


</script>
</body>
</html>